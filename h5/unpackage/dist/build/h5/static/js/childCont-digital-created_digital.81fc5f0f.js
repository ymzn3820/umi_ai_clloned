(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childCont-digital-created_digital"],{"2add":function(e,t,i){"use strict";(function(e){i("7a82");var n=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("ade3"));i("3c65"),i("14d9"),i("baa5"),i("d3b7"),i("ddb0");var o=i("6673"),s=i("ab3b"),c={data:function(){return{tipsData:[{img:"https://umi-intelligence.oss-cn-shenzhen.aliyuncs.com/xcx/com/message_center/Frame 427320021.png",text:"光线充足"},{img:"https://umi-intelligence.oss-cn-shenzhen.aliyuncs.com/xcx/com/message_center/Frame 427320022.png",text:"周围安静"},{img:"https://umi-intelligence.oss-cn-shenzhen.aliyuncs.com/xcx/com/message_center/Frame 427320025.png",text:"面部无遮挡"},{img:"https://umi-intelligence.oss-cn-shenzhen.aliyuncs.com/xcx/com/message_center/Frame 427320023.png",text:"声音清晰"}],boyValue:"选择男声",boyIndex:"",boyEngine:"",boyCode:"",boyUrl:"",boyShow:!1,boyList:[[{voice_name:"男声"},{voice_name:"女声"}]],boyListData:[],image:"",innerAudioContext:null,playShow:!1,picImg:e.baseImg+"/xcx/com/message_center/%E6%9C%80%E6%96%B0%E5%8A%A8%E5%9B%BE.gif",info:"",step:0}},onLoad:function(e){console.log(e,8856),e&&(this.info=JSON.parse(e.info),this.step=e.code),this.init()},onShow:function(){this.getmyVoice()},methods:(0,a.default)({init:function(){var e=this;this.innerAudioContext=uni.createInnerAudioContext(),this.innerAudioContext.obeyMuteSwitch=!1,this.innerAudioContext.onPlay((function(){console.log("开始播放")})),this.innerAudioContext.onEnded((function(){console.log("播放停止了"),e.innerAudioContext.stop(),e.playShow=!1}))},play:function(t){this.playShow=!0,this.innerAudioContext.src=e.baseImg+"/"+t,this.innerAudioContext.play()},stop:function(){this.innerAudioContext.stop(),this.playShow=!1},getmyVoice:function(e){var t=this;this.boyList=[[{voice_name:"男声"},{voice_name:"女声"}]],this.boyListData=[],(0,o.getSpeechVoice)({engine_code:"1000010006",voice_type:2}).then((function(e){2e4==e.code?(e.data&&(t.boyList[0].unshift({voice_name:"我的声音"}),t.boyListData.push(e.data),t.boyList.push(e.data),t.boyIndex=e.data[0].voice_code,t.boyEngine=e.data[0].engine_code,t.boyUrl=e.data[0].speech_url,t.boyValue=e.data[0].voice_name,t.boyCode=e.data[0].voice),t.getmanVoice()):t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("获取失败！")}))},getmanVoice:function(e){var t=this;(0,o.getSpeechVoice)({engine_code:"1000010005",voice_type:1,gender:1}).then((function(e){2e4==e.code?(0==t.boyListData.length&&(t.boyList.push(e.data),t.boyIndex=e.data[0].voice_code,t.boyEngine=e.data[0].engine_code,t.boyUrl=e.data[0].speech_url,t.boyValue=e.data[0].voice_name,t.boyCode=e.data[0].voice),t.boyListData.push(e.data),t.getwomanVoice()):t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("获取失败！")}))},getwomanVoice:function(e){var t=this;(0,o.getSpeechVoice)({engine_code:"1000010005",voice_type:1,gender:2}).then((function(e){2e4==e.code?t.boyListData.push(e.data):t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("获取失败！")}))},toPage:function(){uni.navigateTo({url:"/childCont/digital/my"})},openSelect:function(){this.boyShow=!0},submit:function(){var e=this;if(""==this.image)return this.$api.msg("请上传图片");if(""==this.boyUrl)return this.$api.msg("请选择声音");uni.showLoading({title:"创建中，请稍后"});var t=JSON.parse(uni.getStorageSync("userInfo")),i={user_id:t.user_id,token:t.token,face_image:this.image,audio_id:this.boyIndex,audio_name:this.boyValue,audio_url:this.boyUrl,audio_code:this.boyCode,engine_code:this.boyEngine,base_model_id:this.info.base_model_id,base_model_url:this.info.base_model_url,base_model_url_speak:this.info.base_model_url_speak,similarity:this.step/100};(0,s.creatModel)(i).then((function(t){2e4==t.code?(uni.navigateTo({url:"/childCont/digital/status_digital?edit=1"}),uni.hideLoading()):(uni.hideLoading(),e.$api.msg(t.msg))})).catch((function(t){uni.hideLoading(),e.$api.msg("获取失败！")}))},uploadImg:function(){var t=JSON.parse(uni.getStorageSync("memberInfo"));if(1!=t.is_real_name){var i=this;uni.chooseImage({count:1,mediaType:["image"],sourceType:["album","camera"],camera:"back",success:function(t){uni.showLoading({title:"上传中"}),console.log(t.tempFiles);var n=t.tempFilePaths[0];n.substring(n.lastIndexOf(".")+1);uni.uploadFile({url:e.loginUrl+"/api/user/oss_upload",filePath:n,name:"image",formData:{image:n,oss_dir:"static",cate:"problem_picture"},success:function(e){var t=JSON.parse(e.data);if(2e4==t.code){var n=t.data.new_url;i.image=n,console.log(i.image,"图片")}uni.hideLoading()}})}})}else this.toH5Link()},toH5Link:function(){uni.showModal({title:"提示",content:"使用该功能需实名认证，点击确定进行实名",success:function(e){var t=this;if(e.confirm){(0,o.getRealNameAuthentication)({path:"/pages/chat/chat_history",query:"",env_version:""}).then((function(e){if(2e4==e.code){var i=encodeURIComponent(e.data.openlink);uni.setStorageSync("href",i);var n=t;(0,o.realNameAuthentication)({}).then((function(e){2e4==e.code?(uni.setStorageSync("namelink",e.data.verify_token),uni.navigateTo({url:"/childPage/news/h5Link"})):n.$api.msg(e.msg)})).catch((function(e){t.$api.msg("跳转失败")}))}else t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("跳转失败")}))}}})},getImgUrl:function(t){return e.baseImg+"/"+t},changeHandler:function(e){var t=e.columnIndex,i=(e.value,e.values,e.index),n=e.picker,a=void 0===n?this.$refs.uPicker:n;0===t&&a.setColumnValues(1,this.boyListData[i])},boySubmit:function(e){console.log(e,8854),this.boyIndex=e.value[1].voice_code,this.boyEngine=e.value[1].engine_code,this.boyUrl=e.value[1].speech_url,this.boyValue=e.value[1].voice_name,this.boyCode=e.value[1].voice,this.boyShow=!1,console.log(this.boyUrl,3325)},toClone:function(){var e=JSON.parse(uni.getStorageSync("memberInfo"));1!=e.is_real_name?uni.navigateTo({url:"/childCont/clone/voice_clone"}):this.toH5Link()}},"toH5Link",(function(){uni.showModal({title:"提示",content:"使用该功能需实名认证，点击确定进行实名",success:function(e){var t=this;if(e.confirm){(0,o.getRealNameAuthentication)({path:"/pages/chat/chat_history",query:"",env_version:""}).then((function(e){if(2e4==e.code){var i=encodeURIComponent(e.data.openlink);uni.setStorageSync("href",i);(0,o.realNameAuthentication)({}).then((function(e){2e4==e.code&&(uni.setStorageSync("namelink",e.data.verify_token),uni.navigateTo({url:"/childPage/news/h5Link"}))})).catch((function(e){t.$api.msg("跳转失败")}))}})).catch((function(e){t.$api.msg("跳转失败")}))}}})}))};t.default=c}).call(this,i("c8ba"))},"3f68":function(e,t,i){"use strict";i.r(t);var n=i("2add"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},"630a":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".main[data-v-c57e68d0]{width:100%;padding:%?20?% %?64?% %?60?% %?64?%;padding-top:%?40?%;box-sizing:border-box;position:relative}.main .my[data-v-c57e68d0]{width:%?70?%;height:%?70?%;text-align:center;border-radius:50%;background:#efefef;color:#9a9a9a;font-size:%?26?%;padding:%?10?%;position:absolute;top:%?10?%;left:%?20?%}.main .line-title[data-v-c57e68d0]{width:3px;height:18px;background:#1f64ff;margin-right:%?18?%}.main .main-upload[data-v-c57e68d0]{width:%?450?%;border-radius:8px;background:#f6f8fb;position:relative;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.main .main-upload .main-upload-box[data-v-c57e68d0]{width:%?450?%;height:%?450?%;display:flex;flex-direction:column;align-items:center;justify-content:center;border:1px dashed #d1d3d6}.main .main-upload .main-upload-box uni-image[data-v-c57e68d0]{width:%?48?%;height:%?48?%}.main .main-upload .main-upload-box uni-text[data-v-c57e68d0]{color:#666;font-size:14px;font-style:normal;font-weight:400;line-height:150%;margin-top:%?18?%\n  /* 21px */}.main .main-upload .main-upload-btn[data-v-c57e68d0]{width:100%;padding:%?10?%;box-sizing:border-box;text-align:center;border-radius:%?8?%;border:1px solid #1f64ff;margin-top:%?30?%;margin-bottom:%?16?%;color:#1f64ff}.main .main-upload .main-upload-tips[data-v-c57e68d0]{width:100%;color:#999;font-size:%?26?%}.main .tips[data-v-c57e68d0]{margin-top:%?40?%;width:100%}.main .tips .tips-top[data-v-c57e68d0]{display:flex;align-items:center;justify-content:space-between}.main .tips .tips-top .line[data-v-c57e68d0]{width:37%;height:1px;background:linear-gradient(270deg,#d9d9d9 108.88%,hsla(0,0%,85.1%,0) 0)}.main .tips .tips-top uni-text[data-v-c57e68d0]{color:#2d2d2d;font-size:13px;font-style:normal;font-weight:500;line-height:150%\n  /* 19.5px */}.main .tips .tips_copy[data-v-c57e68d0]{width:calc(100% - %?20?%);border-radius:%?8?%;border:%?1?% solid #999;display:flex;align-items:center;justify-content:space-between;padding:%?20?% %?10?%;margin-top:%?20?%}.main .tips .tips_copy .copy_l[data-v-c57e68d0]{display:flex;align-items:center}.main .tips .tips_copy .copy_l .copy_text[data-v-c57e68d0]{font-size:%?26?%;color:#333}.main .tips .tips_copy .copy_r[data-v-c57e68d0]{font-size:%?28?%;color:#f56c6c}.main .tips .tips-content[data-v-c57e68d0]{display:flex;justify-content:space-around;align-items:center;margin-top:%?30?%}.main .tips .tips-content .tips-content-box[data-v-c57e68d0]{display:flex;flex-direction:column;margin-top:%?24?%}.main .tips .tips-content .tips-content-box uni-image[data-v-c57e68d0]{width:%?62?%;height:%?62?%;margin-bottom:%?24?%;position:relative;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.main .tips .tips-content .tips-content-box uni-text[data-v-c57e68d0]{color:#000;font-size:12px;font-style:normal;font-weight:400;line-height:150%\n  /* 18px */}.main .audio[data-v-c57e68d0]{width:100%;margin-top:%?60?%}.main .audio .audio-title[data-v-c57e68d0]{display:flex;justify-content:space-between;align-items:center}.main .audio .audio-title > uni-view[data-v-c57e68d0]:first-child{display:flex;justify-content:space-between;align-items:center}.main .audio .audio-title > uni-view[data-v-c57e68d0]:last-child{color:#1f64ff}.main .audio .audio-check[data-v-c57e68d0]{width:100%;display:flex;justify-content:space-between;flex-wrap:wrap}.main .audio .audio-check .audio-check-box[data-v-c57e68d0]{width:100%}.main .audio .audio-check .audio-check-box > uni-view[data-v-c57e68d0]{padding:%?10?% %?20?%;border-radius:%?16?%;border:1px solid #999;display:flex;justify-content:space-between;align-items:center;margin-top:%?35?%}.main .audio .audio-check > uni-view[data-v-c57e68d0]:nth-child(even){display:flex;justify-content:flex-end}.main .tag[data-v-c57e68d0]{width:100%;padding:%?20?% 0;margin-top:%?30?%}.main .tag .text_cont[data-v-c57e68d0]{display:flex;align-items:center;margin-bottom:%?10?%;width:100%}.main .tag .text_cont .text_l[data-v-c57e68d0]{color:#ff0101;font-size:%?22?%;font-style:normal;font-weight:400;line-height:%?26?%;margin-right:%?5?%}.main .tag .text_r[data-v-c57e68d0]{color:#333;text-align:center;font-size:%?24?%;font-style:normal;font-weight:530;line-height:%?26?%}.main .surround[data-v-c57e68d0]{border-radius:16rx;border:%?2?% solid #d7d9df;padding:%?24?%;display:flex;flex-wrap:wrap;align-items:baseline}.main .u-page__tag-item[data-v-c57e68d0]{display:flex;justify-content:flex-start;align-items:center;margin:0 %?10?% 0 0}.main .submit[data-v-c57e68d0]{margin:%?60?% %?0?%;width:90%;padding:%?25?% %?0?%;box-sizing:border-box;position:relative;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);background:#1f64ff;color:#fff;text-align:center;border-radius:%?12?%}.pop_voice[data-v-c57e68d0]{padding:%?30?%;display:flex;align-items:center;justify-content:center;flex-direction:column}.pop_voice .pop_img[data-v-c57e68d0]{width:%?300?%;height:%?300?%}.pop_voice .pop_stop[data-v-c57e68d0]{color:#fff;font-size:%?30?%;font-weight:400;line-height:150%;width:70%;background:#1f64ff;padding:%?15?% %?0?%;border-radius:%?8?%;margin-top:%?30?%;text-align:center}",""]),e.exports=t},"70f2":function(e,t,i){"use strict";i.r(t);var n=i("bd28"),a=i("3f68");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("e807");var s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"c57e68d0",null,!1,n["a"],void 0);t["default"]=c.exports},ab3b:function(e,t,i){"use strict";(function(e){i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.againVoice=function(t){return(0,n.JsomPut)({url:e.baseUrl+"/api/sv_voice/volcengine_voice_train",data:t})},t.creatMessage=function(t){return(0,n.post)({url:e.figureUrl+"/beings/message/",data:t})},t.creatModel=function(t){return(0,n.post)({url:e.figureUrl+"/beings/models/",data:t})},t.creatVoice=function(t){return(0,n.JsomPost)({url:e.baseUrl+"/api/sv_voice/volcengine_voice_train",data:t})},t.delMessage=function(t){return(0,n.del)({url:e.figureUrl+"/beings/message/",data:t})},t.delModel=function(t){return(0,n.del)({url:e.figureUrl+"/beings/models/",data:t})},t.editModel=function(t){return(0,n.JsomPut)({url:e.figureUrl+"/beings/models/",data:t})},t.getBaseModel=function(t){return(0,n.get)({url:e.figureUrl+"/beings/base_models/",data:t})},t.getEnv=function(t){return(0,n.get)({url:e.figureUrl+"/beings/env_change/",data:t})},t.getInteract=function(t){return(0,n.post)({url:e.figureUrl+"/beings/interact/",data:t})},t.getMessage=function(t){return(0,n.get)({url:e.figureUrl+"/beings/message/",data:t})},t.getModelList=function(t){return(0,n.get)({url:e.figureUrl+"/beings/models/",data:t})},t.getShare=function(t){return(0,n.post)({url:e.figureUrl+"/beings/share/",data:t})},t.getStats=function(t){return(0,n.post)({url:e.figureUrl+"/beings/stats/",data:t})},t.getVoiceCount=function(t){return(0,n.get)({url:e.baseUrl+"/api/sv_voice/get_vid_number",data:t})},t.getVoiceIdQuery=function(t){return(0,n.get)({url:e.baseUrl+"/api/sv_voice/VoiceIdQuery",data:t})},t.getVoiceList=function(t){return(0,n.get)({url:e.baseUrl+"/api/sv_voice/volcengine_voice_train",data:t})},t.getapplication=function(t){return(0,n.JsomPost)({url:e.memberUrl+"/pay/message_center/",data:t})},t.getapplicationContent=function(t){return(0,n.JsomPost)({url:e.memberUrl+"/pay/message_center_content/",data:t})},t.openVoice=function(t){return(0,n.put)({url:e.baseUrl+"/api/sv_voice/enable_voice",data:t})},t.updateVisit=function(t){return(0,n.put)({url:e.figureUrl+"/beings/visit/",data:t})};var n=i("ca26")}).call(this,i("c8ba"))},bd28:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}));var n={uIcon:i("fd47").default,uPicker:i("991c").default,uPopup:i("7623").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"my",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toPage()}}},[e._v("我的分身")]),i("v-uni-view",{staticClass:"main-upload"},[i("v-uni-view",{staticClass:"main-upload-box",style:{border:""!=e.image?"0px":""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.uploadImg()}}},[""==e.image?[i("u-icon",{attrs:{name:"plus",color:"#666",size:"32"}}),i("v-uni-text",[e._v("请上传照片")])]:i("v-uni-image",{staticStyle:{height:"450rpx"},attrs:{mode:"heightFix",src:e.getImgUrl(e.image)}})],2),i("v-uni-view",{staticClass:"main-upload-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.uploadImg()}}},[e._v(e._s(e.image?"更换图片":"上传照片"))]),i("v-uni-view",{staticClass:"main-upload-tips"},[e._v("上传的照片需要包含人脸")])],1),i("v-uni-view",{staticClass:"tips"},[i("v-uni-view",{staticClass:"tips-top"},[i("v-uni-view",{staticClass:"line"}),i("v-uni-text",[e._v("注意事项")]),i("v-uni-view",{staticClass:"line"})],1),i("v-uni-view",{staticClass:"tips-content"},e._l(e.tipsData,(function(t,n){return i("v-uni-view",{key:n,staticClass:"tips-content-box"},[i("v-uni-image",{attrs:{src:t.img}}),i("v-uni-text",[e._v(e._s(t.text))])],1)})),1)],1),i("v-uni-view",{staticClass:"audio"},[i("v-uni-view",{staticClass:"audio-title"},[i("v-uni-view",[i("v-uni-view",{staticClass:"line-title"}),i("v-uni-text",[e._v("选择声音")])],1),""!=e.boyUrl?i("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.play(e.boyUrl)}}},[e._v("试听")]):e._e()],1),i("v-uni-view",{staticClass:"audio-check"},[i("v-uni-view",{staticClass:"audio-check-box"},[i("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openSelect.apply(void 0,arguments)}}},[i("v-uni-text",[e._v(e._s(e.boyValue))]),i("u-icon",{attrs:{name:"arrow-down",color:"#666",size:"18"}})],1)],1)],1)],1),i("v-uni-view",{staticClass:"submit",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit()}}},[e._v("确定")]),i("u-picker",{ref:"uPicker",attrs:{show:e.boyShow,columns:e.boyList,defaultIndex:[0,0],keyName:"voice_name"},on:{cancel:function(t){arguments[0]=t=e.$handleEvent(t),e.boyShow=!1},confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.boySubmit.apply(void 0,arguments)},change:function(t){arguments[0]=t=e.$handleEvent(t),e.changeHandler.apply(void 0,arguments)}},model:{value:e.boyIndex,callback:function(t){e.boyIndex=t},expression:"boyIndex"}}),i("u-popup",{attrs:{show:e.playShow,mode:"center",round:10,zIndex:10099,closeOnClickOverlay:!1},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.playShow=!1}}},[i("v-uni-view",{staticClass:"pop_voice"},[i("v-uni-image",{staticClass:"pop_img",attrs:{src:e.picImg}}),i("v-uni-view",{staticClass:"pop_stop",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.stop.apply(void 0,arguments)}}},[e._v("停止播放")])],1)],1)],1)},o=[]},e807:function(e,t,i){"use strict";var n=i("f0cc"),a=i.n(n);a.a},f0cc:function(e,t,i){var n=i("630a");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("b846beaa",n,!0,{sourceMap:!1,shadowMode:!1})}}]);
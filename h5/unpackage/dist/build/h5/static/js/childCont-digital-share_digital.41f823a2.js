(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childCont-digital-share_digital"],{2379:function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".container[data-v-80129094]{height:100vh;background-size:100% 100%;z-index:98}.poster_text[data-v-80129094]{position:absolute;left:25px;bottom:30px;color:#fff;font-size:12px;font-style:normal;font-weight:500;line-height:normal;z-index:99}",""]),e.exports=t},"58e5":function(e,t,i){"use strict";(function(e){i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("d3b7"),i("3ca3"),i("ddb0"),i("fb6a");var n=i("ab3b"),a={data:function(){return{codeImg:"",info_img:"",userInfo:"",pageData:{post_img:"",codePng:null},ctx:null,windowObj:{},canvasHeight:0,canvasWidth:0,isShow:!0,backImg:"",model_id:"",greeting:"我是本业务的数字分身，有什么相关问题直接问我吧"}},components:{},onLoad:function(t){this.info_img=e.baseImg+"/hotel/com/message_center/card_code.png",this.backImg=e.baseImg+"/"+t.model_img,this.model_id=t.model_id,t.greet&&(this.greeting=t.greet)},onShow:function(){this.getQrCode()},onReady:function(){this.ctx=wx.createCanvasContext("shareCanvas")},methods:{getQrCode:function(){var e=this,t=JSON.parse(uni.getStorageSync("userInfo")),i={user_id:t.user_id,model_id:this.model_id,page:"pages/index/index"};(0,n.getShare)(i).then((function(t){2e4==t.code?(e.codeImg=t.data.share_code,e.exportPost()):e.$api.msg(t.message)}))},getImageInfo:function(e){return new Promise((function(t,i){uni.getImageInfo({src:e,success:function(e){return t(e)},fail:function(e){return i(e)}})}))},exportPost:function(){this.isShow=!0;var e=this;uni.showLoading({title:"海报生成中"}),uni.getSystemInfo({success:function(t){console.log(t,4512),e.windowObj=t,e.canvasWidth=e.windowObj.windowWidth,e.canvasHeight=e.windowObj.windowHeight;var i=e.backImg,n=e.codeImg;Promise.all([e.getImageInfo(i),e.getImageInfo(n)]).then((function(t){var i,n=e.canvasWidth-120;e.canvasHeight;i=e.canvasHeight-155,e.ctx.drawImage(t[0].path,0,0,e.canvasWidth,e.canvasHeight),e.ctx.fillStyle="rgba(0, 0, 0, 0.2)",e.ctx.fillRect(0,e.canvasHeight-200,e.canvasWidth,300);var a="",o="";e.greeting.length>13?(a=e.greeting.slice(0,12),o=e.greeting.slice(12)):a=e.greeting,e.ctx.fillStyle="#ffffff",e.ctx.setFontSize(16),e.ctx.fillText(a,25,e.canvasHeight-100),e.greeting.length>13&&(e.ctx.fillStyle="#ffffff",e.ctx.setFontSize(16),e.ctx.fillText(o,25,e.canvasHeight-80)),e.ctx.drawImage(t[1].path,n,i,100,100),e.ctx.fillStyle="#ffffff",e.ctx.setFontSize(12),e.ctx.fillText("长按识别二维码",n,e.canvasHeight-35),e.ctx.draw(!0,setTimeout((function(){uni.canvasToTempFilePath({x:0,y:0,width:e.windowObj.windowWidth,height:e.windowObj.windowHeight,destWidth:2*e.windowObj.windowWidth,destHeight:2*e.windowObj.windowHeight,canvasId:"shareCanvas",fileType:"jpg",success:function(t){uni.hideLoading(),console.log(t,6325),e.pageData.post_img=t.tempFilePath,e.isShow=!1,e.$forceUpdate()},fail:function(e){console.log(e)}})}),500))}))}})}}};t.default=a}).call(this,i("c8ba"))},"73c8":function(e,t,i){"use strict";var n=i("afbd"),a=i.n(n);a.a},a381:function(e,t,i){"use strict";i.r(t);var n=i("58e5"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},ab3b:function(e,t,i){"use strict";(function(e){i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.againVoice=function(t){return(0,n.JsomPut)({url:e.baseUrl+"/api/sv_voice/volcengine_voice_train",data:t})},t.creatMessage=function(t){return(0,n.post)({url:e.figureUrl+"/beings/message/",data:t})},t.creatModel=function(t){return(0,n.post)({url:e.figureUrl+"/beings/models/",data:t})},t.creatVoice=function(t){return(0,n.JsomPost)({url:e.baseUrl+"/api/sv_voice/volcengine_voice_train",data:t})},t.delMessage=function(t){return(0,n.del)({url:e.figureUrl+"/beings/message/",data:t})},t.delModel=function(t){return(0,n.del)({url:e.figureUrl+"/beings/models/",data:t})},t.editModel=function(t){return(0,n.JsomPut)({url:e.figureUrl+"/beings/models/",data:t})},t.getBaseModel=function(t){return(0,n.get)({url:e.figureUrl+"/beings/base_models/",data:t})},t.getEnv=function(t){return(0,n.get)({url:e.figureUrl+"/beings/env_change/",data:t})},t.getInteract=function(t){return(0,n.post)({url:e.figureUrl+"/beings/interact/",data:t})},t.getMessage=function(t){return(0,n.get)({url:e.figureUrl+"/beings/message/",data:t})},t.getModelList=function(t){return(0,n.get)({url:e.figureUrl+"/beings/models/",data:t})},t.getShare=function(t){return(0,n.post)({url:e.figureUrl+"/beings/share/",data:t})},t.getStats=function(t){return(0,n.post)({url:e.figureUrl+"/beings/stats/",data:t})},t.getVoiceCount=function(t){return(0,n.get)({url:e.baseUrl+"/api/sv_voice/get_vid_number",data:t})},t.getVoiceIdQuery=function(t){return(0,n.get)({url:e.baseUrl+"/api/sv_voice/VoiceIdQuery",data:t})},t.getVoiceList=function(t){return(0,n.get)({url:e.baseUrl+"/api/sv_voice/volcengine_voice_train",data:t})},t.getapplication=function(t){return(0,n.JsomPost)({url:e.memberUrl+"/pay/message_center/",data:t})},t.getapplicationContent=function(t){return(0,n.JsomPost)({url:e.memberUrl+"/pay/message_center_content/",data:t})},t.openVoice=function(t){return(0,n.put)({url:e.baseUrl+"/api/sv_voice/enable_voice",data:t})},t.updateVisit=function(t){return(0,n.put)({url:e.figureUrl+"/beings/visit/",data:t})};var n=i("ca26")}).call(this,i("c8ba"))},afbd:function(e,t,i){var n=i("2379");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("09953e70",n,!0,{sourceMap:!1,shadowMode:!1})},dad4:function(e,t,i){"use strict";i.r(t);var n=i("ffee"),a=i("a381");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("73c8");var s=i("f0c5"),r=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"80129094",null,!1,n["a"],void 0);t["default"]=r.exports},ffee:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this.$createElement,t=this._self._c||e;return t("v-uni-view",[t("v-uni-view",[t("v-uni-view",{staticStyle:{width:"100%",height:"100vh",position:"relative"}},[t("v-uni-view",[t("v-uni-image",{staticStyle:{width:"100%"},attrs:{"show-menu-by-longpress":!0,mode:"widthFix",src:this.pageData.post_img}})],1),t("v-uni-view",{staticClass:"poster_text"},[this._v("长按图片保存，分享给朋友")])],1),this.isShow?t("v-uni-view",[t("v-uni-canvas",{staticClass:"canvas",style:{height:this.canvasHeight+"px",width:this.canvasWidth+"px"},attrs:{"canvas-id":"shareCanvas",bindlongpress:"saveImg",catchtouchmove:"true"}})],1):this._e()],1)],1)},a=[]}}]);
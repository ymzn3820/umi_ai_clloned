(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childCont-digital-chat"],{"04d9":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-91d5fe04], uni-scroll-view[data-v-91d5fe04], uni-swiper-item[data-v-91d5fe04]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-col[data-v-91d5fe04]{padding:0;box-sizing:border-box}.u-col-0[data-v-91d5fe04]{width:0}.u-col-1[data-v-91d5fe04]{width:calc(100%/12)}.u-col-2[data-v-91d5fe04]{width:calc(100%/12 * 2)}.u-col-3[data-v-91d5fe04]{width:calc(100%/12 * 3)}.u-col-4[data-v-91d5fe04]{width:calc(100%/12 * 4)}.u-col-5[data-v-91d5fe04]{width:calc(100%/12 * 5)}.u-col-6[data-v-91d5fe04]{width:calc(100%/12 * 6)}.u-col-7[data-v-91d5fe04]{width:calc(100%/12 * 7)}.u-col-8[data-v-91d5fe04]{width:calc(100%/12 * 8)}.u-col-9[data-v-91d5fe04]{width:calc(100%/12 * 9)}.u-col-10[data-v-91d5fe04]{width:calc(100%/12 * 10)}.u-col-11[data-v-91d5fe04]{width:calc(100%/12 * 11)}.u-col-12[data-v-91d5fe04]{width:calc(100%/12 * 12)}',""]),t.exports=e},"0f4d":function(t,e,n){"use strict";n.r(e);var i=n("af53"),o=n("e6f1");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("d551");var r=n("f0c5"),s=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"13a54938",null,!1,i["a"],void 0);e["default"]=s.exports},"0fd8":function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("c7eb")),a=i(n("1da1")),r=i(n("3597")),s={name:"u-col",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],data:function(){return{width:0,parentData:{gutter:0},gridNum:12}},computed:{uJustify:function(){return"end"==this.justify||"start"==this.justify?"flex-"+this.justify:"around"==this.justify||"between"==this.justify?"space-"+this.justify:this.justify},uAlignItem:function(){return"top"==this.align?"flex-start":"bottom"==this.align?"flex-end":this.align},colStyle:function(){var t={paddingLeft:uni.$u.addUnit(uni.$u.getPx(this.parentData.gutter)/2),paddingRight:uni.$u.addUnit(uni.$u.getPx(this.parentData.gutter)/2),alignItems:this.uAlignItem,justifyContent:this.uJustify,textAlign:this.textAlign,flex:"0 0 ".concat(100/this.gridNum*this.span,"%"),marginLeft:100/12*this.offset+"%"};return uni.$u.deepMerge(t,uni.$u.addStyle(this.customStyle))}},mounted:function(){this.init()},methods:{init:function(){var t=this;return(0,a.default)((0,o.default)().mark((function e(){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.updateParentData(),e.next=3,t.parent.getComponentWidth();case 3:t.width=e.sent;case 4:case"end":return e.stop()}}),e)})))()},updateParentData:function(){this.getParentData("u-row")},clickHandler:function(t){this.$emit("click")}}};e.default=s},"126e":function(t,e,n){"use strict";n.r(e);var i=n("0fd8"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},"1a3e":function(t,e,n){var i=n("04d9");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("843de8fe",i,!0,{sourceMap:!1,shadowMode:!1})},"1f6a":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{ref:"u-row",staticClass:"u-row",style:[t.rowStyle],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickHandler.apply(void 0,arguments)}}},[t._t("default")],2)},o=[]},"2e49":function(t,e){t.exports={uuid:function(t){for(var e=[],n=0;n<36;n++)e[n]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var i=e.join("");return t?i.split("-").join(""):i}}},3597:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("a9e3");var i={props:{span:{type:[String,Number],default:uni.$u.props.col.span},offset:{type:[String,Number],default:uni.$u.props.col.offset},justify:{type:String,default:uni.$u.props.col.justify},align:{type:String,default:uni.$u.props.col.align},textAlign:{type:String,default:uni.$u.props.col.textAlign}}};e.default=i},3729:function(t,e,n){"use strict";(function(t){n("7a82");var i=n("dbce").default,o=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("e9c4"),n("498a"),n("14d9"),n("d3b7"),n("159b"),n("ac1f"),n("5319"),n("baa5");var a=o(n("53ca")),r=o(n("c7eb")),s=o(n("1da1")),c=o(n("ade3")),u=n("6673"),l=n("ab3b"),d=(n("27e6"),i(n("90a1")),n("fc24")),f=n("c167").sleep,p={data:function(){var e;return e={picImg1:t.baseImg+"/xcx/com/message_center/%E6%9C%80%E6%96%B0%E5%8A%A8%E5%9B%BE.gif",phoneImg:t.baseImg+"/xcx/com/message_center/Frame 427321012.png",wxImg:t.baseImg+"/xcx/com/message_center/Frame 427319549.png",wxgImg:t.baseImg+"/xcx/com/message_center/users-group.png",webImg:t.baseImg+"/xcx/com/message_center/web_site.png",tabImg1:t.baseImg+"/xcx/com/message_center/minus-square.png",tabImg2:t.baseImg+"/xcx/com/message_center/消息 1.png",tabImg3:t.baseImg+"/xcx/com/message_center/分享 4.png",tabImg4:t.baseImg+"/xcx/com/message_center/记录 (1).png",tabImg5:t.baseImg+"/xcx/com/message_center/creat.png",chatChange:"keyboard",isBtn:!1,Height:0,speak1:t.baseImg+"/xcx/com/message_center/speak1.mp4",speak2:t.baseImg+"/xcx/com/message_center/speak2.mp4",speak3:t.baseImg+"/xcx/com/message_center/speak3.mp4",messageShow:!1,messageValue:"",messagePhone:"",chatInputValue:"",chat_type:-4,loading:!0,session_code:"",chat_group_code:"",supplement:{msg_list:[]},prompt:"",isone:!0,videoContext:"",videoContext_no:"",infoSpeak:"",token:"",voice_url:"",innerAudioContext:null,speakValue:"",stop_three:!1,three_shi:0,three_time:0,controller_three:"",load_state:!1},(0,c.default)(e,"messageValue",""),(0,c.default)(e,"chatValue",[]),(0,c.default)(e,"voiceValue",[]),(0,c.default)(e,"current",0),(0,c.default)(e,"textIndex",0),(0,c.default)(e,"text_val",""),(0,c.default)(e,"noSpekLoad",!0),(0,c.default)(e,"ySpeakLoad",!0),(0,c.default)(e,"interact",""),(0,c.default)(e,"is_click",!1),(0,c.default)(e,"click_count",0),(0,c.default)(e,"temp_id",""),(0,c.default)(e,"tipShow",!1),(0,c.default)(e,"top_tip",1),(0,c.default)(e,"img_index",9),(0,c.default)(e,"no_index",8),(0,c.default)(e,"y_index",7),(0,c.default)(e,"isPlay",!0),(0,c.default)(e,"stResult",""),(0,c.default)(e,"stStart",!1),(0,c.default)(e,"rec_token",""),(0,c.default)(e,"webSocketTask",""),(0,c.default)(e,"webSendTask",""),e},onLoad:function(){var t=(0,s.default)((0,r.default)().mark((function t(e){var n,i=this;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.chatInfo&&(this.infoSpeak=JSON.parse(e.chatInfo),this.speakValue=this.infoSpeak.model_greetings,this.interact=this.infoSpeak.model_greetings,this.speakValue||(this.speakValue="你好我是数字分身，有什么问题可以向我提问",this.interact="你好我是数字分身，有什么问题可以向我提问")),e.temp_id&&(this.temp_id=e.temp_id),this.init(),wx.getRecorderManager().onFrameRecorded((function(t){t.isLastFrame&&console.log("record done"),i.st&&i.stStart&&i.st.sendAudio(t.frameBuffer)})),wx.getRecorderManager().onStart((function(){console.log("start recording...")})),wx.getRecorderManager().onStop((function(t){console.log(t,"stop recording...")})),wx.getRecorderManager().onError((function(t){console.log("recording failed:"+t)})),t.prev=7,t.next=10,this.getToken();case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t["catch"](7),console.log("error on get token:",JSON.stringify(t.t0)),t.abrupt("return");case 16:n=new d({url:"wss://nls-gateway.cn-shanghai.aliyuncs.com/ws/v1",appkey:"uoqMiDTzMPirQ4Js",token:this.rec_token}),n.on("started",(function(t){console.log("Client recv started")})),n.on("changed",(function(t){console.log("Client recv changed:",t);var e=JSON.parse(t);e.header.name})),n.on("completed",(function(t){console.log("Client recv completed:",t)})),n.on("begin",(function(t){console.log("Client recv sentenceBegin:",t);var e=JSON.parse(t);e.header.name})),n.on("end",(function(t){console.log("Client recv sentenceEnd:",t);var e=JSON.parse(t);"SentenceEnd"==e.header.name&&(i.message="",i.stResult=i.stResult+e.payload.result,i.$forceUpdate())})),n.on("closed",(function(){i.stStart?i.continueRecord():(i.endRecord(),i.st?i.st.shutdown():console.log("st is null"))})),n.on("failed",(function(t){console.log("Client recv failed:",t);var e=JSON.parse(t);"40000004"==e.header.status&&i.stStart?(console.log("出现错误了"),i.continueRecord()):(i.endRecord(),i.st?i.st.shutdown():console.log("st is null"))})),this.st=n;case 22:case"end":return t.stop()}}),t,this,[[7,12]])})));return function(e){return t.apply(this,arguments)}}(),onShow:function(){var t=this;this.videoContext_no=uni.createVideoContext("noVideo"),this.videoContext=uni.createVideoContext("myVideo"),""==this.infoSpeak?this.getModelList():setTimeout((function(){t.videoContext_no.play()}),1e3)},onHide:function(){this.voiceValue=[],this.stop()},onUnload:function(){this.voiceValue=[],this.stop()},methods:{init:function(){var t=this;this.innerAudioContext=uni.createInnerAudioContext(),this.innerAudioContext.obeyMuteSwitch=!1,this.innerAudioContext.onPlay((function(){console.log("开始播放")})),this.innerAudioContext.onEnded((function(){console.log("播放停止了"),t.current++,t.current<t.voiceValue.length&&(t.chatValue[t.current]?(t.speakValue=t.chatValue[t.current],t.innerAudioContext.src=t.voiceValue[t.current],t.innerAudioContext.play()):(t.speakValue=t.infoSpeak.model_greetings,t.speakValue||(t.speakValue="你好我是数字分身，有什么问题可以向我提问",t.interact="你好我是数字分身，有什么问题可以向我提问"),t.videoContext.stop(),t.videoContext_no.play(),t.noSpekLoad=!0,t.isPlay=!0,t.img_index=8,t.no_index=9,t.y_index=7)),t.current>=t.voiceValue.length&&(t.speakValue=t.infoSpeak.model_greetings,t.speakValue||(t.speakValue="你好我是数字分身，有什么问题可以向我提问",t.interact="你好我是数字分身，有什么问题可以向我提问"),t.videoContext.stop(),t.videoContext_no.play(),t.noSpekLoad=!0,t.isPlay=!0,t.img_index=8,t.no_index=9,t.y_index=7)})),this.innerAudioContext.onStop((function(t){console.log("出错了111")}))},changeSpeak:function(){var t=this;uni.authorize({scope:"scope.record",fail:function(){uni.showToast({icon:"none",title:"请在小程序设置中启用麦克风权限"})},success:function(){console.log("开启成功"),t.chatChange="audio"}})},longpressBtn:function(t){this.readyGO(),this.top_tip=t,this.tipShow=!0},touchendBtn:function(){var t=this;this.endRecord(),setTimeout((function(){t.tipShow=!1,t.stopSpeak()}),2e3)},readyGO:function(){var t=this;return(0,s.default)((0,r.default)().mark((function e(){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.startRecord();case 1:case"end":return e.stop()}}),e)})))()},startRecord:function(){var t=(0,s.default)((0,r.default)().mark((function t(){var e;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.st){t.next=3;break}return console.log("st is null"),t.abrupt("return");case 3:if(!this.stStart){t.next=6;break}return console.log("st is started!"),t.abrupt("return");case 6:return e=this.st,t.prev=7,t.next=10,e.start(e.defaultStartParams());case 10:this.stStart=!0,this.stResult="",console.log("录音开始"),t.next=19;break;case 15:return t.prev=15,t.t0=t["catch"](7),console.log("start failed:"+t.t0),t.abrupt("return");case 19:wx.getRecorderManager().start({duration:6e5,numberOfChannels:1,sampleRate:16e3,format:"PCM",frameSize:4});case 20:case"end":return t.stop()}}),t,this,[[7,15]])})));return function(){return t.apply(this,arguments)}}(),continueRecord:function(){var t=(0,s.default)((0,r.default)().mark((function t(){var e;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.st,this,t.prev=2,t.next=5,e.start(e.defaultStartParams());case 5:console.log("录音继续"),t.next=12;break;case 8:return t.prev=8,t.t0=t["catch"](2),console.log("start failed:"+t.t0),t.abrupt("return");case 12:wx.getRecorderManager().start({duration:6e5,numberOfChannels:1,sampleRate:16e3,format:"PCM",frameSize:4});case 13:case"end":return t.stop()}}),t,this,[[2,8]])})));return function(){return t.apply(this,arguments)}}(),stopSpeak:function(){this.chatInputValue=this.stResult,this.sendMessage()},endRecord:function(){var t=(0,s.default)((0,r.default)().mark((function t(){return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return wx.getRecorderManager().stop(),this.stStart=!1,t.next=4,f(500);case 4:if(!this.stStart||!this.st){t.next=14;break}return t.prev=5,console.log("prepare close st"),t.next=9,this.st.close();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](5),console.log("close st failed:"+t.t0);case 14:case"end":return t.stop()}}),t,this,[[5,11]])})));return function(){return t.apply(this,arguments)}}(),getToken:function(){var t=this;return(0,s.default)((0,r.default)().mark((function e(){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("获取录音token"),e.next=3,(0,u.getToken)().then((function(e){2e4==e.code?t.rec_token=e.data.token:t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("获取token失败")}));case 3:case"end":return e.stop()}}),e)})))()},getInteract:function(){var t=this,e={model_id:this.infoSpeak.model_id,question:"",is_click:1};(0,l.getInteract)(e).then((function(e){2e4==e.code?(t.click_count++,1==t.click_count&&t.infoSpeak.share_desc?(t.interact=t.infoSpeak.share_desc,t.speakValue=t.infoSpeak.share_desc):2==t.click_count&&t.infoSpeak.model_function?(t.interact=t.infoSpeak.model_function,t.speakValue=t.infoSpeak.model_function,t.click_count=0):0==t.click_count&&t.infoSpeak.model_greetings?(t.interact=t.infoSpeak.model_greetings,t.speakValue=t.infoSpeak.model_function):(t.speakValue="你好我是数字分身，有什么问题可以向我提问",t.interact="你好我是数字分身，有什么问题可以向我提问"),t.interact?(t.innerAudioContext.stop(),t.voiceValue=[],t.current=0,t.getRcordToken()):(t.innerAudioContext.play(),t.videoContext.play())):t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("获取失败")}))},play:function(t){this.innerAudioContext.src=t,this.innerAudioContext.play()},stop:function(){this.innerAudioContext.stop(),this.videoContext.stop(),this.videoContext_no.play(),this.noSpekLoad=!0,this.img_index=8,this.no_index=9,this.y_index=7},getRcordToken:function(){var t=this;return(0,s.default)((0,r.default)().mark((function e(){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getToken)().then((function(e){2e4==e.code?(t.token=e.data.token,t.speakSocket()):t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("获取token失败")}));case 2:case"end":return e.stop()}}),e)})))()},speakSocket:function(){var e=this,n=this;n.webSocketTask=uni.connectSocket({url:"wss://ai.umi6.com:28083/ws/ali/text_to_speech?token="+this.token+"&long_tts=1&enable_ptts=1",header:{"content-type":"application/json"},success:function(t){console.log("成功",t)}}),n.webSocketTask.onOpen((function(t){console.log("监听WebSocket连接打开事件",t),""!=n.interact?n.text_val=n.interact:n.text_val="你好我是数字分身，有什么问题可以向我提问",n.webSocketTask.send({data:JSON.stringify({text:n.text_val,voice:n.infoSpeak.audio_code,action_type:"send"})}),n.webSocketTask.send({data:JSON.stringify({action_type:"stop"})})})),uni.onSocketError((function(t){console.info("监听WebSocket错误"+t)})),n.webSocketTask.onMessage((function(i){console.log(i,777);var o=(0,a.default)(i.data);if("string"==o){var r=JSON.parse(i.data);if(r){var s=r.data;e.voice_url=t.baseImg+"/"+s,console.log(e.voice_url,5589),n.webSocketTask.close(),n.webSocketTask.onClose((function(t){console.log("WebSocket 已关闭！")})),e.is_click&&(e.videoContext.play(),e.play(e.voice_url),e.is_click=!1)}}}))},getModelList:function(){var t=this,e=JSON.parse(uni.getStorageSync("userInfo")),n=this,i="";i=""!=this.temp_id?{user_id:e.user_id,model_id:this.temp_id,is_visitor:1,get_default:0}:{user_id:e.user_id,is_visitor:0,get_default:1},(0,l.getModelList)(i).then((function(e){2e4==e.code?e.data.length>0&&(t.infoSpeak=e.data[0],""==t.infoSpeak.model_greetings?t.speakValue="你好我是数字分身，有什么问题可以向我提问":t.speakValue=t.infoSpeak.model_greetings,setTimeout((function(){n.videoContext_no.play(),t.img_index=8,t.no_index=9,t.y_index=7}),1e3)):t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("获取失败")}))},playSpeak:function(){this.getInteract(),this.videoContext_no.stop(),this.ySpeakLoad=!0,this.is_click=!0},toSpeakN:function(){this.noSpekLoad&&(this.noSpekLoad=!1,this.img_index=8,this.no_index=9,this.y_index=7)},speakOne:function(){this.isPlay&&(this.getInteract(),this.innerAudioContext.pause(),this.videoContext.pause(),this.is_click=!0)},toSpeakY:function(){this.ySpeakLoad&&(this.ySpeakLoad=!1,this.img_index=8,this.no_index=7,this.y_index=9,this.play(this.voice_url))},toDigital:function(t){0==t?uni.navigateTo({url:"/childCont/digital/my"}):1==t?uni.navigateTo({url:"/childCont/digital/edit_digital?info="+JSON.stringify(this.infoSpeak)}):2==t?uni.navigateTo({url:"/childCont/digital/share_digital?model_img="+this.infoSpeak.out_video_cover+"&model_id="+this.infoSpeak.model_id+"&greet="+this.infoSpeak.share_desc}):uni.navigateTo({url:"/childCont/digital/history_digital?model_id="+this.infoSpeak.model_id})},keyboardheightchange:function(t){0==t.detail.height?(this.Height=0,this.isBtn=!1):(this.isBtn=!0,this.Height=t.detail.height)},inputBlur:function(t){var e=this;this.$nextTick((function(){e.Height=0})),uni.setStorageSync("talkInfo","")},inputFocus:function(t){var e=this;this.isBtn?this.$nextTick((function(){e.Height=t.detail.height})):this.Height=0},message:function(){this.messageShow=!0},getImgUrl:function(e){return t.baseImg+"/"+e},sendMessage:function(){var t=this;if(""==this.chatInputValue.trim())return this.$api.msg("请输入您要发送的内容");this.getsendToken();var e=this.chatInputValue,n={model_id:this.infoSpeak.model_id,question:e,is_click:0};uni.showLoading({title:"思考中"}),(0,l.getInteract)(n).then((function(n){if(2e4==n.code){t.prompt=n.data.context;var i={chat_type:t.chat_type,session_code:t.session_code,chat_group_code:"",content:e,msg_list:[{role:"user",content:e,covert_content:t.prompt,agent_id:t.infoSpeak.model_id}]};i.msg_list=JSON.stringify(i.msg_list),t.creatChatFun(i,"first")}else t.$api.msg(n.msg),uni.hideLoading()})).catch((function(e){t.$api.msg("获取失败"),uni.hideLoading()})),this.chatInputValue="",this.load_state=!1,this.messageValue="",this.chatValue=[],this.voiceValue=[],this.current=0,this.textIndex=0},getsendToken:function(){var t=this;(0,u.getToken)().then((function(e){2e4==e.code?t.token=e.data.token:t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("获取token失败")}))},sendSocket:function(){var e=this;this.webSendTask=uni.connectSocket({url:"wss://ai.umi6.com:28083/ws/ali/text_to_speech?token="+this.token+"&long_tts=1&enable_ptts=1",header:{"content-type":"application/json"},success:function(t){console.log("成功",t)}}),this.webSendTask.onOpen((function(t){console.log("监听WebSocket连接打开事件",t)})),uni.onSocketError((function(t){console.info("监听WebSocket错误"+t)})),this.webSendTask.onMessage((function(n){console.log(n,777);var i=(0,a.default)(n.data);if("string"==i){var o=JSON.parse(n.data);if(o){var r=o.data,s=t.baseImg+"/"+r;console.log(s,5589),e.voiceValue.push(s),1==e.voiceValue.length&&(e.speakValue=e.chatValue[0],e.innerAudioContext.src=e.voiceValue[0],e.innerAudioContext.play(),e.videoContext_no.stop(),e.img_index=8,e.no_index=7,e.y_index=9,e.ySpeakLoad=!1,e.videoContext.play());var c=e;c.webSendTask.close(),c.webSendTask.onClose((function(t){c.textIndex++,c.textIndex<c.chatValue.length&&(c.sendSocket(),setTimeout((function(){c.webSendTask.send({data:JSON.stringify({text:c.chatValue[c.textIndex],voice:c.infoSpeak.audio_code,action_type:"send"})}),c.webSendTask.send({data:JSON.stringify({action_type:"stop"})})}),1e3))}))}}}))},creatChatFun:function(e,n){var i=this;return(0,s.default)((0,r.default)().mark((function n(){var o,a,s,c,u,l,d,f,p,h;return(0,r.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=JSON.parse(uni.getStorageSync("userInfo")),e.scenario_type="chat",e.model="chatglm_turbo",i.controller_three=new AbortController,n.next=6,fetch(t.baseUrl+"/api/chat/async_chat_completion",{method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*",authorization:o.token,role:o.role,source:t.source},body:JSON.stringify(e),signal:i.controller_three.signal}).catch((function(t){}));case 6:if(a=n.sent,"400"!=a.status){n.next=10;break}return a.json().then((function(t){if(t.code<49999){JSON.parse(uni.getStorageSync("userInfo"));40028==t.code||40022==t.code?uni.hideLoading():(uni.hideLoading(),i.$api.msg(t.msg))}else t.code>49999?(uni.hideLoading(),i.$api.msg("网络异常，请稍后重试")):(uni.hideLoading(),i.$api.msg(t.msg))})),n.abrupt("return");case 10:if(a.ok){n.next=14;break}return uni.hideLoading(),i.$message.error(a.statusText),n.abrupt("return");case 14:s=a.body.getReader(),c=new TextDecoder("utf-8"),u="","",0,0,0;case 21:return n.next=24,s.read();case 24:if(l=n.sent,d=l.value,f=l.done,!f){n.next=30;break}return i.$forceUpdate(),n.abrupt("break",33);case 30:d&&(p=c.decode(d),h=p.split("\r\n"),h.forEach((function(t){if(""!=t){var e=JSON.parse(t);if(e.code){if(e.code<49999)return uni.hideLoading(),void i.$api.msg("网络异常，请稍后重试");uni.hideLoading(),i.$api.msg("网络异常，请稍后重试")}else{""!=e.content&&null!=e.content&&(u+=e.content),"stop"==e.finish_reason?(console.log("结束了"),i.load_state=!0):i.load_state=!1;var n=u.replace(i.messageValue,""),o="",a=n.lastIndexOf("。");(n.length>40&&-1!=a||1==i.load_state)&&(o=i.load_state?n:n.substring(0,a+1),i.chatValue.push(o),1==i.chatValue.length&&(uni.hideLoading(),i.sendSocket(),i.isPlay=!1,setTimeout((function(){i.webSendTask.send({data:JSON.stringify({text:o,voice:i.infoSpeak.audio_code,action_type:"send"})}),i.webSendTask.send({data:JSON.stringify({action_type:"stop"})})}),1e3)),console.log(o,3333),i.messageValue=i.messageValue+o)}}}))),n.next=21;break;case 33:case"end":return n.stop()}}),n)})))()},messageSubmit:function(){var t=this;if(""==this.messageValue)return this.$api.msg("请输入留言内容");if(""==this.messagePhone)return this.$api.msg("请输入联系方式");var e=JSON.parse(uni.getStorageSync("userInfo")),n={model_id:this.infoSpeak.model_id,user_id:e.user_id,content:this.messageValue,user_mobile:this.messagePhone};(0,l.creatMessage)(n).then((function(e){2e4==e.code?(t.$api.msg("留言成功"),t.messageShow=!1):t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("留言失败")}))},toPhone:function(t){uni.makePhoneCall({phoneNumber:t})},checkInfo:function(t){this.tipShow=!0,this.top_tip=t},copyWebsite:function(t){wx.setClipboardData({data:t,success:function(){uni.showToast({title:"复制成功"})}})}}};e.default=p}).call(this,n("c8ba"))},"54a3":function(t,e,n){var i=n("970b").default,o=n("5bc3").default;n("14d9"),n("fb6a"),n("a434");var a=function(){"use strict";function t(){i(this,t)}return o(t,[{key:"on",value:function(t,e,n){"function"==typeof e?(this._stores=this._stores||{},(this._stores[t]=this._stores[t]||[]).push({cb:e,ctx:n})):console.error("fn must be a function")}},{key:"emit",value:function(t){this._stores=this._stores||{};var e,n=this._stores[t];if(n){n=n.slice(0),e=[].slice.call(arguments,1);for(var i=0,o=n.length;i<o;i++)n[i].cb.apply(n[i].ctx,e)}}},{key:"off",value:function(t,e){if(this._stores=this._stores||{},arguments.length){var n=this._stores[t];if(n)if(1!==arguments.length)for(var i=0,o=n.length;i<o;i++)e===n[i].cb&&n.splice(i,1);else delete this._stores[t]}else this._stores=[]}}]),t}();t.exports=a},5773:function(t,e,n){"use strict";n.r(e);var i=n("f5f0"),o=n("126e");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("7ea6");var r=n("f0c5"),s=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"91d5fe04",null,!1,i["a"],void 0);e["default"]=s.exports},"5bc3":function(t,e,n){n("7a82");var i=n("a395");function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,i(o.key),o)}}t.exports=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports["default"]=t.exports},"6ede":function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("c7eb")),a=i(n("1da1"));n("a9e3"),n("d3b7");var r=i(n("fec6")),s={name:"u-row",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],data:function(){return{}},computed:{uJustify:function(){return"end"==this.justify||"start"==this.justify?"flex-"+this.justify:"around"==this.justify||"between"==this.justify?"space-"+this.justify:this.justify},uAlignItem:function(){return"top"==this.align?"flex-start":"bottom"==this.align?"flex-end":this.align},rowStyle:function(){var t={alignItems:this.uAlignItem,justifyContent:this.uJustify};return this.gutter&&(t.marginLeft=uni.$u.addUnit(-Number(this.gutter)/2),t.marginRight=uni.$u.addUnit(-Number(this.gutter)/2)),uni.$u.deepMerge(t,uni.$u.addStyle(this.customStyle))}},methods:{clickHandler:function(t){this.$emit("click")},getComponentWidth:function(){var t=this;return(0,a.default)((0,o.default)().mark((function e(){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,uni.$u.sleep();case 2:return e.abrupt("return",new Promise((function(e){t.$uGetRect(".u-row").then((function(t){e(t.width)}))})));case 3:case"end":return e.stop()}}),e)})))()}}};e.default=s},"7ea6":function(t,e,n){"use strict";var i=n("1a3e"),o=n.n(i);o.a},"7ec2":function(t,e,n){n("7a82"),n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("b636"),n("944a"),n("0c47"),n("23dc"),n("3410"),n("d9e2"),n("d401"),n("14d9"),n("159b"),n("131a"),n("26e9"),n("fb6a");var i=n("7037")["default"];function o(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=o=function(){return e},t.exports.__esModule=!0,t.exports["default"]=t.exports;var e={},n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(I){d=function(t,e,n){return t[e]=n}}function f(t,e,n,i){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new E(i||[]);return r(a,"_invoke",{value:S(t,n,s)}),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=f;var h={};function g(){}function v(){}function m(){}var _={};d(_,c,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(T([])));x&&x!==n&&a.call(x,c)&&(_=x);var y=m.prototype=g.prototype=Object.create(_);function w(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){var n;r(this,"_invoke",{value:function(o,r){function s(){return new e((function(n,s){(function n(o,r,s,c){var u=p(t[o],t,r);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==i(d)&&a.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,c)}))}c(u.arg)})(o,r,n,s)}))}return n=n?n.then(s,s):s()}})}function S(t,e,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var r=n.delegate;if(r){var s=O(r,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=p(t,e,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function O(t,e){var n=e.method,i=t.iterator[n];if(void 0===i)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=p(i,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(a.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return v.prototype=m,r(y,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:v,configurable:!0}),v.displayName=d(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,d(t,l,"GeneratorFunction")),t.prototype=Object.create(y),t},e.awrap=function(t){return{__await:t}},w(k.prototype),d(k.prototype,u,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,i,o,a){void 0===a&&(a=Promise);var r=new k(f(t,n,i,o),a);return e.isGeneratorFunction(n)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},w(y),d(y,l,"Generator"),d(y,c,(function(){return this})),d(y,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=T,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach($),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return r.type="throw",r.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],r=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),$(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;$(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}t.exports=o,t.exports.__esModule=!0,t.exports["default"]=t.exports},"82da":function(t,e,n){var i=n("23e7"),o=n("ebb5"),a=o.NATIVE_ARRAY_BUFFER_VIEWS;i({target:"ArrayBuffer",stat:!0,forced:!a},{isView:o.isView})},"90a1":function(t,e,n){(function(i){var o,a,r;n("7037").default;n("c975"),n("d9e2"),n("d401"),n("ace4"),n("d3b7"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("986a"),n("1d02"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("b39a"),n("72f7"),n("159b"),n("82da"),n("c19f"),function(n,s){a=[],o=function(){"use strict";var t="undefined"!==typeof i?i:self;if("undefined"!==typeof t.TextEncoder&&"undefined"!==typeof t.TextDecoder)return{TextEncoder:t.TextEncoder,TextDecoder:t.TextDecoder};var e=["utf8","utf-8","unicode-1-1-utf-8"];return{TextEncoder:function(t){if(e.indexOf(t)<0&&"undefined"!==typeof t&&null!==t)throw new RangeError("Invalid encoding type. Only utf-8 is supported");this.encoding="utf-8",this.encode=function(t){if("string"!==typeof t)throw new TypeError("passed argument must be of type string");var e=unescape(encodeURIComponent(t)),n=new Uint8Array(e.length);return e.split("").forEach((function(t,e){n[e]=t.charCodeAt(0)})),n}},TextDecoder:function(t,n){if(e.indexOf(t)<0&&"undefined"!==typeof t&&null!==t)throw new RangeError("Invalid encoding type. Only utf-8 is supported");if(this.encoding="utf-8",this.ignoreBOM=!1,this.fatal="undefined"!==typeof n&&"fatal"in n&&n.fatal,"boolean"!==typeof this.fatal)throw new TypeError("fatal flag must be boolean");this.decode=function(t,e){if("undefined"===typeof t)return"";var n="undefined"!==typeof e&&"stream"in e&&e.stream;if("boolean"!==typeof n)throw new TypeError("stream option must be boolean");if(ArrayBuffer.isView(t)){var i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=new Array(i.length);return i.forEach((function(t,e){o[e]=String.fromCharCode(t)})),decodeURIComponent(escape(o.join("")))}throw new TypeError("passed argument must be an array buffer view")}}}},r="function"===typeof o?o.apply(e,a):o,void 0===r||(t.exports=r)}()}).call(this,n("c8ba"))},"970b":function(t,e,n){n("d9e2"),n("d401"),t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports["default"]=t.exports},a395:function(t,e,n){var i=n("7037")["default"],o=n("e50d");t.exports=function(t){var e=o(t,"string");return"symbol"===i(e)?e:String(e)},t.exports.__esModule=!0,t.exports["default"]=t.exports},af53:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uIcon:n("fd47").default,uRow:n("e67d").default,uCol:n("5773").default,uTextarea:n("9800").default,uButton:n("80c7").default,uPopup:n("7623").default,"u-Input":n("0724").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"main"},[n("v-uni-image",{staticClass:"video_w",style:{"z-index":t.img_index},attrs:{src:t.getImgUrl(t.infoSpeak.out_video_cover),mode:"aspectFill"}}),n("v-uni-video",{staticClass:"video_w",style:{"z-index":t.no_index},attrs:{src:t.getImgUrl(t.infoSpeak.out_video),id:"noVideo",loop:!0,controls:!1,"show-fullscreen-btn":!1,objectFit:"cover","http-cache":!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.playSpeak.apply(void 0,arguments)},play:function(e){arguments[0]=e=t.$handleEvent(e),t.toSpeakN.apply(void 0,arguments)}}}),n("v-uni-video",{staticClass:"video_w",style:{"z-index":t.y_index},attrs:{src:t.getImgUrl(t.infoSpeak.out_video_speak),loop:!0,id:"myVideo",controls:!1,"show-fullscreen-btn":!1,objectFit:"cover","http-cache":!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.speakOne.apply(void 0,arguments)},play:function(e){arguments[0]=e=t.$handleEvent(e),t.toSpeakY.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"top-nav"},[t.infoSpeak.user_mobile?n("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toPhone(t.infoSpeak.user_mobile)}}},[n("v-uni-image",{attrs:{src:t.phoneImg}}),n("v-uni-text",[t._v("电话")])],1):t._e(),t.infoSpeak.wechat_code?n("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.checkInfo(1)}}},[n("v-uni-image",{attrs:{src:t.wxImg}}),n("v-uni-text",[t._v("微信")])],1):t._e(),t.infoSpeak.group_code?n("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.checkInfo(2)}}},[n("v-uni-image",{attrs:{src:t.wxgImg}}),n("v-uni-text",[t._v("微信群")])],1):t._e(),t.infoSpeak.model_website?n("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.checkInfo(3)}}},[n("v-uni-image",{attrs:{src:t.webImg}}),n("v-uni-text",[t._v("网址")])],1):t._e(),t.temp_id?n("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.message()}}},[n("u-icon",{attrs:{name:"chat",size:"21",color:"#FFF"}}),n("v-uni-text",[t._v("留言")])],1):t._e()],1),n("v-uni-view",{staticClass:"right-nav"},[n("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDigital(0)}}},[n("v-uni-image",{attrs:{src:t.tabImg5}}),n("v-uni-text",[t._v("创建形象")])],1),n("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDigital(1)}}},[n("v-uni-image",{attrs:{src:t.tabImg1}}),n("v-uni-text",[t._v("编辑分身")])],1),t.temp_id?t._e():n("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDigital(2)}}},[n("v-uni-image",{attrs:{src:t.tabImg3}}),n("v-uni-text",[t._v("分享")])],1),t.temp_id?t._e():n("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDigital(3)}}},[n("v-uni-image",{attrs:{src:t.tabImg4}}),n("v-uni-text",[t._v("记录")])],1)],1),n("v-uni-view",{staticClass:"bottom"},[t.infoSpeak.tags?n("v-uni-view",{staticClass:"bottom-tags"},[n("v-uni-view",{staticClass:"bottom-tags-title"},[n("v-uni-image",{attrs:{src:"https://umi-intelligence.oss-cn-shenzhen.aliyuncs.com/xcx/com/message_center/标签 1.png"}}),n("v-uni-text",[t._v("标签")])],1),t._l(t.infoSpeak.tags,(function(e,i){return""!=e?n("v-uni-view",{key:i,staticClass:"tag"},[t._v(t._s(e))]):t._e()}))],2):t._e(),n("v-uni-view",{staticClass:"bottom-tips"},[t._v(t._s(t.speakValue))]),n("v-uni-view",{staticClass:"bottom-bottom"},[n("v-uni-view",{ref:"textInput",staticClass:"bottomInput",style:{bottom:t.Height+"px"}},[n("u-row",{attrs:{align:"bottom",gutter:"5"}},[n("u-col",{attrs:{span:"9.5"}},[n("v-uni-view",{staticClass:"chat_input"},[n("u-textarea",{attrs:{placeholder:"在此输入您想了解的内容",autoHeight:!0,showConfirmBar:!1,adjustPosition:!1,maxlength:"-1",disableDefaultPadding:!0,border:"none",focus:!1},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMessage.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.inputFocus.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t.inputBlur.apply(void 0,arguments)},keyboardheightchange:function(e){arguments[0]=e=t.$handleEvent(e),t.keyboardheightchange.apply(void 0,arguments)}},model:{value:t.chatInputValue,callback:function(e){t.chatInputValue=e},expression:"chatInputValue"}})],1)],1),n("u-col",{attrs:{span:"2.5",align:"bottom"}},[n("u-button",{attrs:{type:"primary",color:"#1F64FF"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMessage.apply(void 0,arguments)}}},[t._v("发送")])],1)],1)],1)],1)],1),n("u-popup",{attrs:{show:t.messageShow,mode:"center",round:8,length:"auto"}},[n("v-uni-view",{staticClass:"message-box"},[n("v-uni-view",{staticClass:"message-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.messageShow=!1}}},[n("u-icon",{attrs:{name:"close",size:"21"}})],1),n("v-uni-view",{staticClass:"message-title"},[t._v("留言")]),n("v-uni-view",{staticClass:"message-content"},[n("u-textarea",{attrs:{placeholder:"请输入你想留言的内容",maxlength:"-1"},model:{value:t.messageValue,callback:function(e){t.messageValue=e},expression:"messageValue"}}),n("v-uni-view",{staticClass:"phone_title"},[t._v("联系方式")]),n("u--input",{attrs:{placeholder:"请输入手机号码",border:"surround",maxlength:"30"},model:{value:t.messagePhone,callback:function(e){t.messagePhone=e},expression:"messagePhone"}}),n("v-uni-view",{staticClass:"message-submit",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.messageSubmit.apply(void 0,arguments)}}},[t._v("提交")])],1)],1)],1),n("u-popup",{attrs:{show:t.tipShow,mode:"center",round:8,length:"auto"}},[n("v-uni-view",{staticClass:"message-box"},[4!=t.top_tip?n("v-uni-view",{staticClass:"message-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tipShow=!1}}},[n("u-icon",{attrs:{name:"close",size:"21"}})],1):t._e(),1==t.top_tip?n("v-uni-view",{staticClass:"message-content"},[n("v-uni-image",{staticStyle:{width:"100%"},attrs:{src:t.getImgUrl(t.infoSpeak.wechat_code),mode:"aspectFit"}})],1):t._e(),2==t.top_tip?n("v-uni-view",{staticClass:"message-content"},[n("v-uni-image",{staticStyle:{width:"100%"},attrs:{src:t.getImgUrl(t.infoSpeak.group_code),mode:"aspectFit"}})],1):t._e(),4==t.top_tip?n("v-uni-view",{staticClass:"message-content"},[n("v-uni-image",{staticStyle:{width:"100%"},attrs:{src:t.picImg1,mode:"aspectFit"}})],1):t._e(),3==t.top_tip?n("v-uni-view",{staticClass:"message-content"},[n("v-uni-view",{staticStyle:{"margin-top":"40rpx","text-align":"center"}},[t._v(t._s(t.infoSpeak.model_website))]),n("v-uni-view",{staticClass:"message-submit",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyWebsite(t.infoSpeak.model_website)}}},[t._v("复制")])],1):t._e()],1)],1)],1)},a=[]},b07c:function(t,e,n){var i=n("f424");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("00581544",i,!0,{sourceMap:!1,shadowMode:!1})},baa5:function(t,e,n){var i=n("23e7"),o=n("e58c");i({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},bd05:function(t,e,n){var i=n("fc3a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("71e85907",i,!0,{sourceMap:!1,shadowMode:!1})},c167:function(t,e,n){n("99af"),n("d81d"),n("d401"),n("d3b7"),n("25f0");function i(t){return t<10?"0"+t:""+t}var o=function(t){return t=t.toString(),t[1]?t:"0".concat(t)};t.exports={formatTime:function(t){var e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),a=t.getHours(),r=t.getMinutes(),s=t.getSeconds();return"".concat([e,n,i].map(o).join("_"),"_").concat([a,r,s].map(o).join("_"))},uploadToSaver:function(t){wx.uploadFile({url:"http://30.224.161.18:9110/res/upload",filePath:t,name:"file",success:function(e){wx.removeSavedFile({filePath:t,success:function(){console.log("remove ".concat(t," done"))},fail:function(){console.log("remove ".concat(t," failed"))}})}})},utctimestamp:function(){var t=new Date,e=t.getUTCFullYear(),n=i(t.getUTCMonth()+1),o=i(t.getUTCDate()),a=i(t.getUTCHours()),r=i(t.getUTCMinutes()),s=i(t.getUTCSeconds());return"".concat(e,"-").concat(n,"-").concat(o,"T").concat(a,":").concat(r,":").concat(s,"Z")},sleep:function(t){return new Promise((function(e){setTimeout(e,t)}))}}},c5d8:function(t,e,n){"use strict";var i=n("b07c"),o=n.n(i);o.a},c973:function(t,e,n){function i(t,e,n,i,o,a,r){try{var s=t[a](r),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(i,o)}n("d3b7"),t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var r=t.apply(e,n);function s(t){i(r,o,a,s,c,"next",t)}function c(t){i(r,o,a,s,c,"throw",t)}s(void 0)}))}},t.exports.__esModule=!0,t.exports["default"]=t.exports},d551:function(t,e,n){"use strict";var i=n("bd05"),o=n.n(i);o.a},e50d:function(t,e,n){n("8172"),n("efec"),n("a4d3"),n("e01a"),n("d3b7"),n("d9e2"),n("d401"),n("a9e3");var i=n("7037")["default"];t.exports=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},e585:function(t,e,n){"use strict";var i=n("970b").default,o=n("5bc3").default;n("d9e2"),n("d401"),n("d3b7");var a=n("2e49").uuid,r=function(){function t(e){if(i(this,t),!e||!e.url||!e.appkey||!e.token)throw new Error("invalid config!");this._config=e}return o(t,[{key:"start",value:function(t,e){var n=this;if("function"!==typeof t)throw new Error("expect function onmessage");if("function"!=typeof e)throw new Error("expect function onclose");return this._ws=wx.connectSocket({url:this._config.url,tcpNoDelay:!0,header:{"X-NLS-Token":this._config.token}}),this._ws.onMessage((function(e){"string"===typeof e.data?t(e.data,!1):t(e.data,!0)})),this._ws.onClose((function(t,n){e(t,n)})),new Promise((function(t,e){n._ws.onOpen((function(e){t(e)})),n._ws.onError((function(t){e(t)}))}))}},{key:"send",value:function(t,e){null!=this._ws&&this._ws.send({data:t})}},{key:"uuid",value:function(){return a(!0)}},{key:"shutdown",value:function(){null!=this._ws&&this._ws.close()}},{key:"defaultContext",value:function(){return{sdk:{name:"nls-wx-sdk",version:"0.0.1",language:"wxjs"}}}}]),t}();t.exports=r},e67d:function(t,e,n){"use strict";n.r(e);var i=n("1f6a"),o=n("f774");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("c5d8");var r=n("f0c5"),s=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"3fa5722e",null,!1,i["a"],void 0);e["default"]=s.exports},e6f1:function(t,e,n){"use strict";n.r(e);var i=n("3729"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},f424:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-3fa5722e], uni-scroll-view[data-v-3fa5722e], uni-swiper-item[data-v-3fa5722e]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-row[data-v-3fa5722e]{display:flex;flex-direction:row}',""]),t.exports=e},f5f0:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{ref:"u-col",staticClass:"u-col",class:["u-col-"+t.span],style:[t.colStyle],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickHandler.apply(void 0,arguments)}}},[t._t("default")],2)},o=[]},f774:function(t,e,n){"use strict";n.r(e);var i=n("6ede"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},fc24:function(t,e,n){"use strict";(function(e){var i=n("7ec2").default,o=n("c973").default,a=n("970b").default,r=n("5bc3").default;n("d3b7"),n("d401"),n("25f0"),n("e9c4"),n("d9e2");var s=n("e585"),c=n("54a3"),u=function(){function t(e){a(this,t),this._event=new c,this._config=e}return r(t,[{key:"defaultStartParams",value:function(){return{format:"pcm",sample_rate:16e3,enable_intermediate_result:!0,enable_punctuation_prediction:!0,enable_inverse_text_normalization:!0}}},{key:"on",value:function(t,e){this._event.on(t,e)}},{key:"start",value:function(){var t=o(i().mark((function t(e){var n,a=this;return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this._client=new s(this._config),this._taskid=this._client.uuid(),n={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:"SpeechTranscriber",name:"StartTranscription",appkey:this._config.appkey},payload:e,context:this._client.defaultContext()},t.abrupt("return",new Promise(function(){var t=o(i().mark((function t(e,o){return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a._client.start((function(t,n){if(!n){var i=t.toString(),o=JSON.parse(i);"TranscriptionStarted"===o.header.name?(a._event.emit("started",i),e(i)):"TranscriptionResultChanged"===o.header.name?a._event.emit("changed",i):"TranscriptionCompleted"===o.header.name?a._event.emit("TranscriptionCompleted",i):"SentenceBegin"===o.header.name?a._event.emit("begin",i):"SentenceEnd"===o.header.name?a._event.emit("end",i):"TaskFailed"===o.header.name&&(a._client.shutdown(),a._client=null,a._event.emit("TaskFailed",i),a._event.emit("failed",i))}}),(function(){a._event.emit("closed")}));case 3:a._client.send(JSON.stringify(n),!1),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),o(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=o(i().mark((function t(n){var o,a=this;return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=this._client){t.next=2;break}return t.abrupt("return",new Promise((function(t,n){e((function(){n("client is null")}))})));case 2:return o={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:"SpeechTranscriber",name:"StopTranscription",appkey:this._config.appkey},payload:n,context:this._client.defaultContext()},t.abrupt("return",new Promise((function(t,e){a._event.on("TranscriptionCompleted",(function(e){a._client&&(a._client.shutdown(),a._client=null),a._event.emit("completed",e),t(e)})),a._event.on("TaskFailed",(function(t){e(t)})),a._client.send(JSON.stringify(o),!1)})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"ctrl",value:function(t){if(null==this._client)throw new Error("client is null");var e={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:"SpeechTranscriber",name:"ControlTranscription",appkey:this._config.appkey},payload:t,context:this._client.defaultContext()};this._client.send(JSON.stringify(e),!1)}},{key:"shutdown",value:function(){null!=this._client&&this._client.shutdown()}},{key:"sendAudio",value:function(t){return null!=this._client&&(this._client.send(t,!0),!0)}}]),t}();t.exports=u}).call(this,n("fe07")["nextTick"])},fc3a:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"[data-v-13a54938] .u-row{align-items:center\n}.message-box[data-v-13a54938]{width:%?400?%;padding:%?30?%;box-sizing:border-box;position:relative}.message-box .message-close[data-v-13a54938]{position:absolute;right:%?30?%;top:%?30?%}.message-box .message-title[data-v-13a54938]{margin-bottom:%?20?%;text-align:center}.message-box .message-box[data-v-13a54938]{width:100%;text-align:center;margin-bottom:%?20?%}.message-box .message-content[data-v-13a54938]{width:100%}.message-box .message-content .phone_title[data-v-13a54938]{margin:%?20?% %?0?%}.message-box .message-content .message-submit[data-v-13a54938]{width:70%;padding:%?12?% %?0?%;margin-top:%?35?%;background:#1f64ff;color:#fff;border-radius:%?12?%;text-align:center;position:relative;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.chat_audio[data-v-13a54938]{width:100%;height:%?76?%;max-height:calc(%?180?% - %?32?%);background-color:#1f64ff;color:#fff;border-radius:%?6?%;display:flex;justify-content:center;align-items:center}.chat_audio[data-v-13a54938]:active{opacity:.5}.chat_input[data-v-13a54938]{border-radius:%?6?%;border:%?1?% solid #e5e6eb;max-height:calc(%?180?% - %?32?%);overflow-y:auto}.chat_input .input_right[data-v-13a54938]{display:flex;align-items:center;border-radius:%?6?%;border:%?1?% solid #e5e5e5;padding-right:%?20?%;width:%?148?%;margin:0 0 %?10?% %?10?%}.chat_input .input_right .inputImg[data-v-13a54938]{width:%?90?%;height:%?90?%;border-radius:%?6?% 0 0 %?6?%}.chat_input .input_right .input_text[data-v-13a54938]{height:%?90?%;width:%?20?%;border-left:%?1?% solid #e5e5e5}.main[data-v-13a54938]{width:100vw;height:100vh;position:relative}.main > uni-image[data-v-13a54938]{width:100%;height:calc(100% - %?120?%)}.main .top-nav[data-v-13a54938]{align-items:center;border-radius:4px;display:inline-block;position:absolute;left:%?20?%;top:%?20?%;z-index:10;display:flex}.main .top-nav > uni-view[data-v-13a54938]{padding:%?20?%;background:rgba(0,0,0,.6)}.main .top-nav > uni-view[data-v-13a54938]{display:flex;flex-direction:column;justify-content:center}.main .top-nav > uni-view uni-image[data-v-13a54938]{width:%?32?%;height:%?32?%;position:relative;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.main .top-nav > uni-view uni-text[data-v-13a54938]{color:#fff;font-size:12px;font-style:normal;font-weight:400;line-height:20px\n  /* 166.667% */}.main .right-nav[data-v-13a54938]{position:absolute;right:%?18?%;top:50%;z-index:10;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.main .right-nav > uni-view[data-v-13a54938]{margin-bottom:%?16.5?%;display:flex;flex-direction:column;justify-content:center}.main .right-nav > uni-view uni-image[data-v-13a54938]{position:relative;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);width:%?54?%;height:%?54?%}.main .right-nav > uni-view uni-text[data-v-13a54938]{color:#fff;font-size:12px;font-style:normal;font-weight:400;line-height:20px;\n  /* 166.667% */text-align:center}.main .bottom[data-v-13a54938]{width:100%;position:absolute;bottom:0;left:50%;z-index:10;-webkit-transform:translate(-50%);transform:translate(-50%)}.main .bottom .bottom-tags[data-v-13a54938]{width:calc(100% - %?40?%);position:relative;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);display:flex;align-items:center;flex-wrap:wrap}.main .bottom .bottom-tags > uni-view[data-v-13a54938]{margin-right:%?16?%}.main .bottom .bottom-tags .bottom-tags-title[data-v-13a54938]{display:flex;align-items:center;border-radius:4px;background:rgba(95,95,95,.4);padding:%?6?% %?16?%;box-sizing:border-box}.main .bottom .bottom-tags .bottom-tags-title uni-image[data-v-13a54938]{margin-right:%?15?%;width:%?32?%;height:%?32?%}.main .bottom .bottom-tags .bottom-tags-title uni-text[data-v-13a54938]{color:#fff;font-size:12px;font-style:normal;font-weight:400;line-height:20px\n  /* 166.667% */}.main .bottom .bottom-tags .tag[data-v-13a54938]{border-radius:4px;border:1px solid #fff;color:#fff;font-size:12px;font-style:normal;font-weight:400;line-height:20px;\n  /* 166.667% */padding:%?4?% %?14?%;box-sizing:border-box}.main .bottom .bottom-tips[data-v-13a54938]{width:calc(100% - %?40?%);position:relative;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);border-radius:4px;background:rgba(0,0,0,.6);color:#fff;font-size:12px;font-style:normal;font-weight:400;line-height:20px;\n  /* 166.667% */padding:%?24?% %?20?%;box-sizing:border-box;margin:%?18?% %?0?%;margin-top:%?16?%}.main .bottom .bottom-bottom[data-v-13a54938]{width:100%;height:%?120?%;padding:%?25?% %?0?%;box-sizing:border-box;background:#fff;overflow-y:auto}.main .bottom .bottom-bottom .bottom-chat[data-v-13a54938]{width:calc(100% - %?4?%);display:flex;justify-content:space-between;border-radius:8px;background:#fff;padding:%?16?%;box-sizing:border-box}.main .bottom .bottom-bottom .bottom-chat > uni-view[data-v-13a54938]:first-child{width:76%}.main .bottom .bottom-bottom .bottom-chat > uni-view[data-v-13a54938]:last-child{width:20%;line-height:%?56?%;text-align:center;border-radius:4px;background:#1f64ff;color:#fff;font-size:14px;font-style:normal;font-weight:500;line-height:20px\n  /* 142.857% */}.bottomInput[data-v-13a54938]{position:fixed;width:100%;background:#fff;padding:8px;box-shadow:0 -.5px 0 rgba(0,0,0,.1)}.video_w[data-v-13a54938]{width:100%;height:100vh;position:absolute}",""]),t.exports=e},fe07:function(t,e,n){"use strict";(function(t){var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.Behavior=function(t){return t},e.Component=function(e){var n=function(e){var n=e.data,i=e.options,o=e.methods,a=e.behaviors,r=e.lifetimes,s=e.observers,l=e.relations,d=e.properties,p=e.pageLifetimes,h=e.externalClasses,g={mixins:[],props:{},watch:{},mpOptions:{mpObservers:[]}};return u(g),c(n,g),function(t,e){if(!t)return;e.mpOptions.options=t}(i,g),S(o,g),T(a,g),function(t,e){if(!t)return;O(t,e)}(r,g),function(t,e){if(!t)return;var n=e.mpOptions.mpObservers;Object.keys(t).forEach((function(e){n.push({paths:j(e),observer:t[e]})}))}(s,g),function(e,n){if(!e)return;Object.keys(e).forEach((function(n){var i=e[n];i.name=n,i.target=i.target?String(i.target):function(t,e){0===e.indexOf("/")&&(t="");var n=t.split("/"),i=e.split("/");n.pop();while(i.length){var o=i.shift();""!==o&&"."!==o&&(".."!==o?n.push(o):n.pop())}return n.join("/")}(t.__wxRoute,n)})),n.mpOptions.relations=e}(l,g),k(d,g),function(t,e){if(!t)return;y.forEach((function(n){var i=t[n];f(i)&&(e[x[n]]=i)}))}(p,g),function(t,e){if(!t)return;Array.isArray(t)||(t=[t]);e.mpOptions.externalClasses=t,e.mpOptions.properties||(e.mpOptions.properties=Object.create(null));t.forEach((function(t){e.mpOptions.properties[m(t)]={type:String,value:""}}))}(h,g),O(e,g),$(e),g}(e);n.mixins.unshift(X),n.mpOptions.path=t.__wxRoute,function(t){t.onServiceAttached||(t.onServiceAttached=[]);t.onServiceAttached.push((function(){N(this,"linked")}))}(n),t.__wxComponents[t.__wxRoute]=n},e.Page=function(e){var n=function(t){var e={mixins:[],mpOptions:{}};return u(e),c(t.data,e),function(t,e){var n=Object.create(null);Object.keys(t).forEach((function(e){var i=t[e];f(i)&&-1===w.indexOf(e)&&(n[e]=i)})),e.methods=n}(t,e),function(t,e){Object.keys(t).forEach((function(n){-1!==w.indexOf(n)&&(e[n]=t[n])}))}(t,e),e}(e);n.mixins.unshift(X),n.mpOptions.path=t.__wxRoute,t.__wxComponents[t.__wxRoute]=n},e.nextTick=e.default=void 0;var o=i(n("ade3")),a=i(n("3835"));n("d3b7"),n("ac1f"),n("5319"),n("b64b"),n("159b"),n("c975"),n("14d9"),n("d81d"),n("7db0"),n("7a82"),n("13d5"),n("fb6a"),n("baa5"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("a9e3"),n("99af"),n("e9c4"),n("1d1c"),n("4de4"),n("3c65");var r,s=i(n("e143"));function c(t,e){t&&(e.mpOptions.data=t)}function u(e){e.components=t.__wxVueOptions.components}var l=Object.prototype.toString,d=Object.prototype.hasOwnProperty;function f(t){return"function"===typeof t}function p(t){return"[object Object]"===l.call(t)}function h(t,e){return d.call(t,e)}function g(){}var v=/-(\w)/g,m=function(t){var e=Object.create(null);return function(n){var i=e[n];return i||(e[n]=t(n))}}((function(t){return t.replace(v,(function(t,e){return e?e.toUpperCase():""}))})),_={created:"onServiceCreated",attached:"onServiceAttached",ready:"mounted",moved:"moved",detached:"destroyed"},b=Object.keys(_),x={show:"onPageShow",hide:"onPageHide",resize:"onPageResize"},y=Object.keys(x),w=["onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","onPageScroll","onResize","onTabItemTap"];function k(t,e){t&&(e.mpOptions.properties=t)}function S(t,e){t&&(t.$emit&&(console.warn('Method "$emit" conflicts with an existing Vue instance method'),delete t.$emit),e.methods=t)}function O(t,e){b.forEach((function(n){h(t,n)&&(e[_[n]]||(e[_[n]]=[])).push(t[n])}))}var C={"wx://form-field":{},"wx://component-export":{}};function $(t,e){(function(t){var e=t.behaviors,n=t.definitionFilter,i=[];if(Array.isArray(e)&&e.forEach((function(e){e="string"===typeof e?C[e]:e,e.definitionFilter&&(i.push(e.definitionFilter),e.definitionFilter.call(null,t,[]))})),f(n));})(t)}var E={"wx://form-field":{beforeCreate:function(){var t=this.$options.mpOptions;t.properties||(t.properties=Object.create(null));var e=t.properties;h(e,"name")||(e.name={type:String}),h(e,"value")||(e.value={type:String})}}};function T(t,e){t&&t.forEach((function(t){"string"===typeof t?E[t]&&e.mixins.push(E[t]):e.mixins.push(function(t){var e=t.data,n=t.methods,i=t.behaviors,o=t.properties,a={watch:{},mpOptions:{mpObservers:[]}};return c(e,a),S(n,a),T(i,a),k(o,a),O(t,a),$(t),a}(t))}))}function j(t){return t.split(",").map((function(t){return function(t){return t.split(".")}(t)}))}function I(t,e,n,i){if(e){var o="_$".concat(t,"Handlers");(i[o]||(i[o]=[])).push((function(){e.call(i,n)}))}}function V(t,e,n){var i=t.name,o=n._$relationNodes||(n._$relationNodes=Object.create(null));(o[i]||(o[i]=[])).push(e),I("linked",t["linked"],e,n)}function P(t,e,n){I("unlinked",t["unlinked"],e,n)}function L(t,e,n){var i=t&&t.$options.mpOptions&&t.$options.mpOptions.relations;if(!i)return[];var o=Object.keys(i).find((function(t){var o=i[t];return o.target===e&&o.type===n}));return o?[i[o],t]:[]}function A(t,e,n){var i=n(t,t.$options.mpOptions.path),o=(0,a.default)(i,2),r=o[0],s=o[1];r&&(V(r,t,s),V(e,s,t),P(r,t,s),P(e,s,t))}function M(t){var e=t.$options.mpOptions||{},n=e.relations;n&&Object.keys(n).forEach((function(e){(function(t,e){var n=t.type;"parent"===n?A(e,t,(function(t,e){return L(t.$parent,e,"child")})):"ancestor"===n&&A(e,t,(function(t,e){var n=t.$parent;while(n){var i=L(n,e,"descendant");if(i.length)return i;n=n.$parent}return[]}))})(n[e],t)}))}function N(t,e){var n=t["_$".concat(e,"Handlers")];n&&n.forEach((function(t){return t()}))}var R={enumerable:!0,configurable:!0,get:g,set:g};function F(t,e,n){R.get=function(){return this[e][n]},R.set=function(t){this[e][n]=t},Object.defineProperty(t,n,R)}function J(t,e){var n=this;p(t)&&(Object.keys(t).forEach((function(e){(function(t,e,n){var i=t.replace(/\[(\d+?)\]/g,".$1").split(".");return i.reduce((function(t,n,o){if(o!==i.length-1)return"undefined"===typeof t[n]&&(t[n]={}),t[n];t[n]=e}),n),1===i.length})(e,t[e],n.data)&&!h(n,e)&&F(n,"__data__",e)})),this.$forceUpdate(),f(e)&&this.$nextTick(e))}var z=Object.prototype.toString,D=function(t){return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=z.call(n);if("[object Array]"===i)return e=n.slice(0),e;if("[object Object]"===i){for(var o in n)e[o]=t(e[o],n[o]);return e}if("[object Date]"===i)return new Date(n.getTime());if("[object RegExp]"===i){var a=String(n),r=a.lastIndexOf("/");return new RegExp(a.slice(1,r),a.slice(r+1))}return n}("[object Array]"===z.call(t)?[]:{},t)},U=(r={},(0,o.default)(r,String,""),(0,o.default)(r,Number,0),(0,o.default)(r,Boolean,!1),(0,o.default)(r,Object,null),(0,o.default)(r,Array,[]),(0,o.default)(r,null,null),r);function B(t){return U[t]}function H(t){return p(t)?t.type:t}function G(t,e,n,i){var o=n[t];if(void 0!==o){var a=e[t],r=H(a);o=W(o,r);var s=a&&a.observer;return s&&setTimeout((function(){Y(s,i,o)}),4),o}return function(t){return p(t)?h(t,"value")?t.value:B(t.type):B(t)}(e[t])}function W(t,e){return e===Boolean?!!t:e===String?String(t):t}function Y(t,e,n,i){try{"function"===typeof t?t.call(e,n,i):"string"===typeof t&&"function"===typeof e[t]&&e[t](n,i)}catch(o){console.error("execute observer ".concat(t," callback fail! err: ").concat(o))}}function q(t){var e=t.$options.mpOptions&&t.$options.mpOptions.properties,n=t.$options.propsData;n&&e&&Object.keys(e).forEach((function(i){h(n,i)&&(t[i]=W(n[i],H(e[i])))}))}function Q(t){var e=JSON.parse(JSON.stringify(t.$options.mpOptions.data||{}));t["__data__"]=e;var n={get:function(){return t["__data__"]},set:function(e){t["__data__"]=e}};Object.defineProperties(t,{data:n,properties:n}),t.setData=J,function(t,e){var n=t.$options.mpOptions.properties;if(n){var i=D(t.$options.propsData)||{},o=function(o){var a=!!p(n[o])&&n[o].observer,r=G(o,n,i,t);Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){var n=r;e===r||e!==e&&r!==r||(r=Array.isArray(e)?e.slice(0):e,a&&Y(a,t,e,n),t.$forceUpdate())}})};for(var a in n)o(a)}}(t,e),Object.keys(e).forEach((function(e){F(t,"__data__",e)}))}var X={beforeCreate:function(){this._renderProxy=this,this._$self=this,this._$noop=g},created:function(){Q(this),function(t){var e=t.$emit;t.triggerEvent=function(n,i,o){var a={dataset:t.$el.dataset},r={target:a,currentTarget:a,detail:i,preventDefault:g,stopPropagation:g};e.call(t,n,r)},t.$emit=function(){t.triggerEvent.apply(t,arguments)},t.getRelationNodes=function(e){return(t._$relationNodes&&t._$relationNodes[e]||[]).filter((function(t){return!t._isDestroyed}))},t._$updateProperties=q}(this),M(this)},mounted:function(){(function(t){var e=t.$options.watch;e&&Object.keys(e).forEach((function(n){var i=e[n];if(i.mounted){var o=t[n],a=i.handler;"string"===typeof a&&(a=t[a]),a&&a.call(t,o,o)}}))})(this)},destroyed:function(){N(this,"unlinked")}};t.__wxRoute="",t.__wxComponents=Object.create(null),t.__wxVueOptions=Object.create(null);var Z=s.default.nextTick;e.nextTick=Z;var K=uni.__$wx__,tt=K;e.default=tt}).call(this,n("c8ba"))},fec6:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("a9e3");var i={props:{gutter:{type:[String,Number],default:uni.$u.props.row.gutter},justify:{type:String,default:uni.$u.props.row.justify},align:{type:String,default:uni.$u.props.row.align}}};e.default=i}}]);